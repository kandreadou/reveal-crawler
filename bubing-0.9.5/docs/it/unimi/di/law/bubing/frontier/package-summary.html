<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_55) on Sat May 03 10:38:28 CEST 2014 -->
<title>it.unimi.di.law.bubing.frontier (BUbiNG 0.9.5)</title>
<meta name="date" content="2014-05-03">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="it.unimi.di.law.bubing.frontier (BUbiNG 0.9.5)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../it/unimi/di/law/bubing/package-summary.html">Prev Package</a></li>
<li><a href="../../../../../../it/unimi/di/law/bubing/parser/package-summary.html">Next Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?it/unimi/di/law/bubing/frontier/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;it.unimi.di.law.bubing.frontier</h1>
<div class="docSummary">
<div class="block">A set of classes orchestrating the movement of URLs to be fetched next by a BUbiNG agent.</div>
</div>
<p>See:&nbsp;<a href="#package_description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../it/unimi/di/law/bubing/frontier/Distributor.html" title="class in it.unimi.di.law.bubing.frontier">Distributor</a></td>
<td class="colLast">
<div class="block">A thread that distributes <a href="../../../../../../it/unimi/di/law/bubing/frontier/Frontier.html#readyURLs">ready URLs</a> 
  (coming out of the <a href="../../../../../../it/unimi/di/law/bubing/frontier/Frontier.html#sieve">sieve</a>) into
  the <a href="../../../../../../it/unimi/di/law/bubing/frontier/Workbench.html" title="class in it.unimi.di.law.bubing.frontier"><code>Workbench</code></a> queues with the help of a <a href="../../../../../../it/unimi/di/law/bubing/frontier/WorkbenchVirtualizer.html" title="class in it.unimi.di.law.bubing.frontier"><code>WorkbenchVirtualizer</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../it/unimi/di/law/bubing/frontier/DNSThread.html" title="class in it.unimi.di.law.bubing.frontier">DNSThread</a></td>
<td class="colLast">
<div class="block">A thread that continuously dequeues a <a href="../../../../../../it/unimi/di/law/bubing/frontier/VisitState.html" title="class in it.unimi.di.law.bubing.frontier"><code>VisitState</code></a> from the <a href="../../../../../../it/unimi/di/law/bubing/frontier/Frontier.html#newVisitStates">queue of new visit states</a> (those that still need a DNS resolution),
  resolves its host and puts it on the <a href="../../../../../../it/unimi/di/law/bubing/frontier/Workbench.html" title="class in it.unimi.di.law.bubing.frontier"><code>Workbench</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../it/unimi/di/law/bubing/frontier/DoneThread.html" title="class in it.unimi.di.law.bubing.frontier">DoneThread</a></td>
<td class="colLast">
<div class="block">A thread that continuously dequeues a <a href="../../../../../../it/unimi/di/law/bubing/frontier/VisitState.html" title="class in it.unimi.di.law.bubing.frontier"><code>VisitState</code></a> from the <a href="../../../../../../it/unimi/di/law/bubing/frontier/Frontier.html#done"><code>Frontier.done</code></a> queue and 
  <a href="../../../../../../it/unimi/di/law/bubing/frontier/Workbench.html#release(it.unimi.di.law.bubing.frontier.VisitState)"><code>releases</code></a> it to the <a href="../../../../../../it/unimi/di/law/bubing/frontier/Workbench.html" title="class in it.unimi.di.law.bubing.frontier"><code>Workbench</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../it/unimi/di/law/bubing/frontier/FetchingThread.html" title="class in it.unimi.di.law.bubing.frontier">FetchingThread</a></td>
<td class="colLast">
<div class="block">A thread fetching pages that will be then analyzed by a <a href="../../../../../../it/unimi/di/law/bubing/frontier/ParsingThread.html" title="class in it.unimi.di.law.bubing.frontier"><code>ParsingThread</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../it/unimi/di/law/bubing/frontier/FetchingThread.BasicHttpClientConnectionManagerWithAlternateDNS.html" title="class in it.unimi.di.law.bubing.frontier">FetchingThread.BasicHttpClientConnectionManagerWithAlternateDNS</a></td>
<td class="colLast">
<div class="block">A support class that makes it possible to plug in a custom DNS resolver.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../it/unimi/di/law/bubing/frontier/Frontier.html" title="class in it.unimi.di.law.bubing.frontier">Frontier</a></td>
<td class="colLast">
<div class="block">The BUbiNG frontier: a class structure that encompasses most of the logic behind the way BUbiNG
 fetches URLs.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../it/unimi/di/law/bubing/frontier/MessageThread.html" title="class in it.unimi.di.law.bubing.frontier">MessageThread</a></td>
<td class="colLast">
<div class="block">A thread that takes care of pouring the content of <a href="../../../../../../it/unimi/di/law/bubing/frontier/Frontier.html#receivedURLs"><code>Frontier.receivedURLs</code></a> into the <a href="../../../../../../it/unimi/di/law/bubing/frontier/Frontier.html" title="class in it.unimi.di.law.bubing.frontier"><code>Frontier</code></a> itself (via the
  <a href="../../../../../../it/unimi/di/law/bubing/frontier/Frontier.html#enqueue(it.unimi.dsi.fastutil.bytes.ByteArrayList)"><code>Frontier.enqueue(it.unimi.dsi.fastutil.bytes.ByteArrayList)</code></a> method).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../it/unimi/di/law/bubing/frontier/ParsingThread.html" title="class in it.unimi.di.law.bubing.frontier">ParsingThread</a></td>
<td class="colLast">
<div class="block">A thread parsing pages retrieved by a <a href="../../../../../../it/unimi/di/law/bubing/frontier/FetchingThread.html" title="class in it.unimi.di.law.bubing.frontier"><code>FetchingThread</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../it/unimi/di/law/bubing/frontier/ParsingThread.FrontierEnqueuer.html" title="class in it.unimi.di.law.bubing.frontier">ParsingThread.FrontierEnqueuer</a></td>
<td class="colLast">
<div class="block">A small gadget used to insert links in the frontier.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../it/unimi/di/law/bubing/frontier/QuickMessageThread.html" title="class in it.unimi.di.law.bubing.frontier">QuickMessageThread</a></td>
<td class="colLast">
<div class="block">A thread that takes care of pouring the content of <a href="../../../../../../it/unimi/di/law/bubing/frontier/Frontier.html#quickReceivedURLs"><code>Frontier.quickReceivedURLs</code></a> into <a href="../../../../../../it/unimi/di/law/bubing/frontier/Frontier.html#receivedURLs"><code>Frontier.receivedURLs</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../it/unimi/di/law/bubing/frontier/StatsThread.html" title="class in it.unimi.di.law.bubing.frontier">StatsThread</a></td>
<td class="colLast">
<div class="block">A class isolating a number of <a href="http://dsiutils.dsi.unimi.it/docs/it/unimi/dsi/logging/ProgressLogger.html?is-external=true" title="class or interface in it.unimi.dsi.logging"><code>ProgressLogger</code></a> instances keeping track of a number of 
  quantities of interest related to the <a href="../../../../../../it/unimi/di/law/bubing/frontier/Distributor.html" title="class in it.unimi.di.law.bubing.frontier"><code>Distributor</code></a>, e.g., 
 <a href="../../../../../../it/unimi/di/law/bubing/frontier/StatsThread.html#requestLogger">requests</a>, <a href="../../../../../../it/unimi/di/law/bubing/frontier/StatsThread.html#transferredBytesLogger">transferred byets</a>, etc.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../it/unimi/di/law/bubing/frontier/TodoThread.html" title="class in it.unimi.di.law.bubing.frontier">TodoThread</a></td>
<td class="colLast">
<div class="block">A thread that continuously <a href="../../../../../../it/unimi/di/law/bubing/frontier/Workbench.html#acquire()">acquires</a> a <a href="../../../../../../it/unimi/di/law/bubing/frontier/VisitState.html" title="class in it.unimi.di.law.bubing.frontier"><code>VisitState</code></a> from the <a href="../../../../../../it/unimi/di/law/bubing/frontier/Workbench.html" title="class in it.unimi.di.law.bubing.frontier"><code>Workbench</code></a> and adds it
  to the <a href="../../../../../../it/unimi/di/law/bubing/frontier/Frontier.html#todo"><code>Frontier.todo</code></a> queue.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../it/unimi/di/law/bubing/frontier/VisitState.html" title="class in it.unimi.di.law.bubing.frontier">VisitState</a></td>
<td class="colLast">
<div class="block">A class maintaining the current state of the visit of a specific scheme+authority.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../it/unimi/di/law/bubing/frontier/VisitStateSet.html" title="class in it.unimi.di.law.bubing.frontier">VisitStateSet</a></td>
<td class="colLast">
<div class="block">A data structure representing the set of <a href="../../../../../../it/unimi/di/law/bubing/frontier/VisitState.html" title="class in it.unimi.di.law.bubing.frontier">visit states</a> created so far.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../it/unimi/di/law/bubing/frontier/Workbench.html" title="class in it.unimi.di.law.bubing.frontier">Workbench</a></td>
<td class="colLast">
<div class="block">The workbench is a <a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/DelayQueue.html?is-external=true" title="class or interface in java.util.concurrent"><code>DelayQueue</code></a> queue of <a href="../../../../../../it/unimi/di/law/bubing/frontier/WorkbenchEntry.html" title="class in it.unimi.di.law.bubing.frontier"><code>WorkbenchEntry</code></a> instances, each associated with an IP address.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../it/unimi/di/law/bubing/frontier/WorkbenchEntry.html" title="class in it.unimi.di.law.bubing.frontier">WorkbenchEntry</a></td>
<td class="colLast">
<div class="block">An element of the <a href="../../../../../../it/unimi/di/law/bubing/frontier/Workbench.html" title="class in it.unimi.di.law.bubing.frontier"><code>Workbench</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../it/unimi/di/law/bubing/frontier/WorkbenchEntrySet.html" title="class in it.unimi.di.law.bubing.frontier">WorkbenchEntrySet</a></td>
<td class="colLast">
<div class="block">A data structure representing the set of <a href="../../../../../../it/unimi/di/law/bubing/frontier/WorkbenchEntry.html" title="class in it.unimi.di.law.bubing.frontier">workbench entries</a> created so far.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../it/unimi/di/law/bubing/frontier/WorkbenchVirtualizer.html" title="class in it.unimi.di.law.bubing.frontier">WorkbenchVirtualizer</a></td>
<td class="colLast">
<div class="block">A <em>workbench virtualizer</em> based on a Berkeley DB database.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Enum Summary table, listing enums, and an explanation">
<caption><span>Enum Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Enum</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../it/unimi/di/law/bubing/frontier/Frontier.PropertyKeys.html" title="enum in it.unimi.di.law.bubing.frontier">Frontier.PropertyKeys</a></td>
<td class="colLast">
<div class="block">Names of the scalar fields saved by <a href="../../../../../../it/unimi/di/law/bubing/frontier/Frontier.html#snap()"><code>Frontier.snap()</code></a>.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package_description">
<!--   -->
</a>
<h2 title="Package it.unimi.di.law.bubing.frontier Description">Package it.unimi.di.law.bubing.frontier Description</h2>
<div class="block">A set of classes orchestrating the movement of URLs to be fetched next by a BUbiNG agent.

        <p>To start understanding how the frontier works, we should consider three levels of aggregation
        of the jobs that a BUbiNG agent is to perform:
                <ul>
                        <li>at the ground level, we have URLs, as they come out of the <a href="../../../../../../it/unimi/di/law/bubing/sieve/AbstractSieve.html" title="class in it.unimi.di.law.bubing.sieve">sieve</a>: these
                        are known unvisited URLs that should eventually be considered;
                        <li>URLs are grouped by their scheme+authority part, to form a <a href="../../../../../../it/unimi/di/law/bubing/frontier/VisitState.html" title="class in it.unimi.di.law.bubing.frontier"><code>VisitState</code></a>:
                        the visit state collects the statistics related to how the visit of that scheme+authority
                        is going on;
                        <li><a href="../../../../../../it/unimi/di/law/bubing/frontier/VisitState.html" title="class in it.unimi.di.law.bubing.frontier"><code>VisitState</code></a>s are grouped by IP, forming a <a href="../../../../../../it/unimi/di/law/bubing/frontier/WorkbenchEntry.html" title="class in it.unimi.di.law.bubing.frontier"><code>WorkbenchEntry</code></a>:
                        the reason behind this is that we do not want to have more threads fetching pages
                        from the same IP at the same time, even if the IP is accessed with different 
                        host names.
                </ul>

        <p>We now describe how these structures are created and move around, inviting the reader to consult
        the documentation of the approprate classes to get more information.

        <p><b>How visit states are born.</b>
        URLs come out of the <a href="../../../../../../it/unimi/di/law/bubing/sieve/AbstractSieve.html" title="class in it.unimi.di.law.bubing.sieve">sieve</a> and are accumulated in the <a href="../../../../../../it/unimi/di/law/bubing/frontier/Frontier.html#readyURLs"><code>Frontier.readyURLs</code></a> queue.
        URLs from the latter queue are read (by a process called distributor) and taken care of, one at a time.
        Every time a URL is considered, the distributor must know if the URL belongs to an already-known
        scheme+authority or not.
        This is done using the <a href="../../../../../../it/unimi/di/law/bubing/frontier/Distributor.html#schemeAuthority2VisitState"><code>Distributor.schemeAuthority2VisitState</code></a> map that contains (as values) all
        the visit states ever created. 
        After a visit state is created, and in all moments of its life, new URL may arrive for that scheme+authority
        and are enqueued to the visit state (or, possibly, to an on-disk virtualization of its tail, if the visit
        state becomes too large; the virtualization aspects are not described in this document, but we invite
        the reader to consult the documentation of the distributor to know more about this).

        <p><b>When a new visit state is created.</b>
        If necessary, a new visit state is created, and it is added to a special queue of <a href="../../../../../../it/unimi/di/law/bubing/frontier/Frontier.html#newVisitStates"><code>Frontier.newVisitStates</code></a>
        for a DNS thread to eventually solve its hostname into an IP address (which is a necessary step to
        be able to aggregate the visit state to an appropriate workbench entry).
        Note that when the hostname has been resolved, the new visit state is either put in the appropriate
        workbench entry, or a new one is created for it.

        <p><b>Acquisition of visit states.</b>
        A visit state can be acquired only when its workbench entry is not acquired (i.e., no one is trying to
        fetch pages from any of the visit states contained in it), and in that case it is assumed to be nonempty
        (empty visit states are temporarily removed from their workbench entry until a new URL is put in them again). 
        A further condition should be considered for a visit state to be acquired, which is related to politeness:
        enough time must have elapsed since the last fetch of a page for the same visit state (i.e., for the same
        scheme+authority) and moreover enough time must have elapsed since the last fetch of a page for the same
        workbench entry (i.e., for the same IP). 
        When both conditions are satisfied, the visit state is moved onto a queue called <a href="../../../../../../it/unimi/di/law/bubing/frontier/Frontier.html#todo"><code>Frontier.todo</code></a> (by
        a special thread called <a href="../../../../../../it/unimi/di/law/bubing/frontier/TodoThread.html" title="class in it.unimi.di.law.bubing.frontier"><code>TodoThread</code></a>). At that point both the visit state and the workbench
        entry it belongs to are declared as being acquired.

        <p><b>Fetching threads.</b>
        When a fetching thread is free, it will try to get a visit state from the <a href="../../../../../../it/unimi/di/law/bubing/frontier/Frontier.html#todo"><code>Frontier.todo</code></a> queue. 
        After this, it will fetch one or more URLs from the host. Every time a page has been fetched, it is 
        put in the <a href="../../../../../../it/unimi/di/law/bubing/frontier/Frontier.html#results"><code>Frontier.results</code></a> queue so that it can be parsed by a parsing thread. Only when this
        happens, the fetching thread can proceed to fetch another URL (because every fetching thread has a buffer
        to store the page, that is reused every time). When the fetching thread is done with fetching,
        it will put back the visit state in the <a href="../../../../../../it/unimi/di/law/bubing/frontier/Frontier.html#done"><code>Frontier.done</code></a> queue, so that it is then released to the workbench.</div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../it/unimi/di/law/bubing/package-summary.html">Prev Package</a></li>
<li><a href="../../../../../../it/unimi/di/law/bubing/parser/package-summary.html">Next Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?it/unimi/di/law/bubing/frontier/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
